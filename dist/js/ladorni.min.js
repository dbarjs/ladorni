var Logo=function(){function t(t,i,e){this.viewport=t,this.url=i,this.fallback=e,this.get()}return t.prototype.appendTo=function(t,i){i?t.insertBefore(this.viewport,i):t.appendChild(this.viewport)},t.prototype.cloneTo=function(t){t.appendChild(this.viewport.cloneNode(this.viewport))},t.prototype.get=function(){var t=this;if(this.viewport&&this.url){var i=new XMLHttpRequest;i.open("GET",this.url,!0),i.onreadystatechange=function(){4===this.readyState&&200==this.status&&this.responseText&&(t.viewport.innerHTML=this.responseText,t.fallback&&t.fallback())},i.send(),i=null}},t}(),Menu=function(){function t(t){var i=this;this.viewport=t,this.backdrop={},this.backdrop.defaultClass="Menu-backdrop",this.backdrop.isAppended=!1,this.isActive=!1,this.closeAnimationTime=300,this.openAnimationTime=100,this.onToggleClick=function(t){t.preventDefault(),i.toggle()},this.onBackdropClick=function(t){i.close()},this.onKeyDown=function(t){i.isActive&&27==t.keyCode&&(t.preventDefault(),i.close())},this.viewport&&this.init()}return t.prototype.close=function(){var t=this;this.isActive&&(this.isActive=!1),this.viewport.classList.remove("is-active"),this.viewport.classList.add("is-animating"),this.animationDelay&&clearTimeout(this.animationDelay),this.animationDelay=setTimeout(function(){t.viewport.classList.remove("is-animating"),t.detachBackdrop()},this.closeAnimationTime)},t.prototype.open=function(){var t=this;this.isActive||(this.isActive=!0),this.appendBackdrop(),this.viewport.classList.add("is-active"),this.viewport.classList.add("is-animating"),this.animationDelay&&clearTimeout(this.animationDelay),this.animationDelay=setTimeout(function(){t.viewport.classList.remove("is-animating")},this.openAnimationTime)},t.prototype.toggle=function(){this.isActive?this.close():this.open()},t.prototype.detachBackdrop=function(){this.backdrop.viewport&&this.backdrop.viewport.remove(),this.backdrop.isAppended=!1},t.prototype.appendBackdrop=function(){this.backdrop.viewport||(this.backdrop.viewport=this.buildBackdrop()),this.viewport.insertBefore(this.backdrop.viewport,this.viewport.firstChild),this.backdrop.isAppended=!0},t.prototype.buildBackdrop=function(){var t=document.createElement("div");return t.className=this.backdrop.defaultClass,t.addEventListener("click",this.onBackdropClick,!1),t},t.prototype.addListeners=function(){window.addEventListener("keydown",this.onKeyDown,!1)},t.prototype.initBackdrop=function(){this.backdrop.viewport=this.viewport.querySelector(".Menu-backdrop"),this.backdrop.viewport&&(this.backdrop.defaultClass=this.backdrop.viewport.className,this.backdrop.viewport.addEventListener("click",this.onBackdropClick,!1))},t.prototype.getToggleButton=function(){for(var t=this.viewport.querySelectorAll(".MenuToggleButton"),i=t.length;i--;)t[i].addEventListener("click",this.onToggleClick,!1)},t.prototype.init=function(){this.getToggleButton(),this.initBackdrop(),this.addListeners(),this.close()},t}(),Navigation=function(){function t(t,i){var e=this;this.viewport=t,this.document=i,this.transition={},this.title={},this.title["default"]="La Dorni",this.title.defaultPrefix="La Dorni | ",this.title.defaultPostfix=" | La Dorni",this.navigationItems=[],this.home=!1,this.error=!1,this.onNavigationItemClick=function(t){if(this.dataset.navigationTarget){t.preventDefault();var i=e.queryNavigationItem(this.dataset.navigationTarget);i&&e.setCurrentState(i)}},this.onPopStateCtrl=function(t){var i=e.queryNavigationItem(history.state.name);i&&e.setCurrentState(i,!0)}}return t.prototype.pushItem=function(t,i){var e=new NavigationItem(t,i);e.isHome&&(this.home=e),this.navigationItems.push(e)},t.prototype.matchURL=function(t){return!!window.location.href.match(new RegExp(t,"g"))},t.prototype.queryCurrentState=function(){for(var t=this.navigationItems.length;t--;)if(this.matchURL(this.navigationItems[t].url))return this.navigationItems[t];return this.home},t.prototype.buildTitle=function(t){return this.title?t?this.title.defaultPostfix?t+this.title.defaultPostfix:this.title.defaultPrefix?this.title.defaultPostfix+t:t:this.title["default"]:t?t:""},t.prototype.setTitle=function(t){t&&(document.title=this.buildTitle(t.title))},t.prototype.setCurrentState=function(t,i){this.transition&&console.log(this.transition);var e=new NavigationState(t);e&&(this.setTitle(e),i?history.replaceState(e,e.title,e.url):history.pushState(e,e.title,e.url))},t.prototype.queryNavigationItem=function(t){for(var i=this.navigationItems.length;i--;)if(this.navigationItems[i].name==t)return this.navigationItems[i];return!1},t.prototype.getTransition=function(){var t=this.viewport.querySelector("Transition");t&&(this.transition=new Transition(t,this)),console.log(this.transition)},t.prototype.addListeners=function(){window.addEventListener("popstate",this.onPopStateCtrl,!1);for(var t=this.document.querySelectorAll(".NavigationItem"),i=t.length;i--;)t[i].addEventListener("click",this.onNavigationItemClick,!1)},t.prototype.init=function(){this.addListeners(),this.getTransition(),this.navigationItems.length&&this.setCurrentState(this.queryCurrentState())},t}(),NavigationItem=function(){function t(t,i){this.name=t.itemName,this.title=t.itemTitle,this.url=t.itemURL,this.isHome=t.isHome||!1,this.page=this.getPage(i)}return t.prototype.getPage=function(t){return new Page(t)},t}(),NavigationState=function(){function t(t){this.name=t.name||!1,this.title=t.title||!1,this.url=t.url||!1}return t}(),Page=function(){function t(t){this.viewport=t||!1}return t}(),Transition=function(){function t(t,i){this.viewport=t,this.navigation=i}return t.prototype.start=function(){console.log("kkk")},t.prototype.init=function(){},t}(),Wine=function(){function t(t,i,e){var o=this;this.viewport=t,this.options=i||{},this.config={activeClass:"is-active",expandClass:"is-expanded",animateClass:"is-animated",animateDelay:400},this.inner={},this.background={},this.description={},this.header={},this.figure={},this.footer={},this.showMoreButton={},this.checkoutButton={},this.animationTimer=0,this.isExpanded=!1,this.isActive=!1,this.onClickToToggle=function(t){t.preventDefault(),o.toggle()},this.onClickToShowDescription=function(t){t.preventDefault(),o.description.toggleLimit(),o.checkoutButton.getAnchor()&&o.checkoutButton.getAnchor().focus()},this.onKeyDownToToggle=function(t){o.isActive&&(37==t.keyCode?o.expand():39==t.keyCode&&o.unexpand())},e&&this.init()}return t.prototype.expand=function(){var t=this;this.isExpanded||(this.isExpanded=!0,this.viewport.classList.add(this.config.expandClass),this.viewport.classList.add(this.config.animateClass),this.animationTimer&&clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){t.viewport.classList.remove(t.config.animateClass),t.description.addLimit(),t.description&&t.description.getAnchor().focus(),t.checkoutButton&&t.checkoutButton.getAnchor().enableFocus()},this.config.animateDelay))},t.prototype.unexpand=function(){var t=this;this.isExpanded&&(this.isExpanded=!1,this.viewport.classList.remove(this.config.expandClass),this.viewport.classList.add(this.config.animateClass),this.animationTimer&&clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){t.viewport.classList.remove(t.config.animateClass),t.description.addLimit(),t.description&&t.description.getAnchor().disableFocus(),t.checkoutButton&&t.checkoutButton.getAnchor().disableFocus(),t.showMoreButton.getAnchor().focus()},this.config.animateDelay))},t.prototype.toggle=function(){this.isExpanded?this.unexpand():this.expand()},t.prototype.active=function(){this.isActive||(this.isActive=!0,this.viewport.classList.add(this.config.activeClass),this.description.getAnchor().enableFocus(),this.isExpanded?this.description.getAnchor().focus():this.showMoreButton.getAnchor().focus())},t.prototype.inactive=function(){this.isActive&&(this.isActive=!1,this.viewport.classList.remove(this.config.activeClass),this.description.disableFocus(),this.showMoreButton.disableFocus())},t.prototype.cloneResume=function(){var t,i,e,o,n;for(t="",e=[],n=this.viewport.querySelectorAll(".WineResume"),o=n.length;o--;)t=n[o].querySelectorAll(".WineResumeList"),t.length?i=t[0]:e.push(n[o]);for(o=e.length;o--;)t=i.cloneNode(!0),e[o].appendChild(t)},t.prototype.addListeners=function(){window.addEventListener("keydown",this.onKeyDownToToggle,!1),this.description&&this.description.getAnchor().addListener(this.onClickToShowDescription)},t.prototype.normalizeCheckout=function(){if(this.footer.viewport){var t=this.footer.viewport.querySelector(".WineCheckout");t&&(this.checkoutButton=new WineCheckout(t))}},t.prototype.normalizeShowMoreButton=function(){var t=this.viewport.querySelector(".WineShowMore");t?this.showMoreButton.viewport=t:(this.showMoreButton=new WineShowMore,this.viewport.appendChild(this.showMoreButton.viewport)),this.showMoreButton.anchor.viewport.addEventListener("click",this.onClickToToggle,!1)},t.prototype.normalizeDescription=function(){var t=this.viewport.querySelector(".WineDescription");t&&(this.description=new WineDescription(t),this.description.init())},t.prototype.normalizeFooter=function(){this.footer.viewport=this.viewport.querySelector(".WineFooter")},t.prototype.normalizeFigure=function(){this.figure.viewport=this.viewport.querySelector(".WineFigure")},t.prototype.normalizeHeader=function(){this.header.viewport=this.viewport.querySelector(".WineHeader")},t.prototype.normalizeWine=function(){var t=this.viewport.querySelector(".Wine-background");t||(t=document.createElement("div"),t.className="Wine-background"),this.background.viewport=t,this.inner.viewport=this.viewport.querySelector(".Wine-inner"),this.inner.viewport&&this.viewport.insertBefore(this.background.viewport,this.inner.viewport)},t.prototype.normalize=function(){this.normalizeWine(),this.normalizeHeader(),this.normalizeFigure(),this.normalizeFooter(),this.normalizeShowMoreButton(),this.normalizeDescription(),this.normalizeCheckout(),this.cloneResume()},t.prototype.init=function(){this.normalize(),this.viewport.classList.contains("is-expanded")&&(this.isExpanded=!0),this.viewport.classList.contains("is-active")?this.active():this.inactive(),this.addListeners()},t}(),WineAnchor=function(){function t(t){this.viewport=t;var i=!!this.viewport;i&&(this.viewport.hasAttribute("href")?(this.url=this.viewport.href,this.hasFocus=!0):(this.url="#",this.hasFocus=!1))}return t.prototype.focus=function(){this.hasFocus||this.enableFocus(),this.getViewport().focus()},t.prototype.blur=function(){this.getViewport().blur()},t.prototype.enableFocus=function(){this.hasFocus=!0,this.getViewport().href=this.url},t.prototype.disableFocus=function(){this.hasFocus=!1,this.getViewport().removeAttribute("href"),this.blur()},t.prototype.getViewport=function(){return this.viewport},t.prototype.getURL=function(){return this.url},t.prototype.addListener=function(t){this.viewport.addEventListener?this.viewport.addEventListener("click",t,!1):this.viewport.attachEvent("onclick",t)},t}(),WineCheckout=function(){function t(t){return this.viewport=t,this.anchor={},this.buttonTitle={},this.button={},this.icon={},this.hasFocus=!1,this.normalize(),this}return t.prototype.getAnchor=function(){return this.anchor},t.prototype.appendAndBuildButtonTitle=function(){var t=document.createElement("span");t.className="WineCheckoutTitle";var i=document.createElement("span");i.className="Wine-anchor-text",i.innerHTML="Ir para loja online",t.appendChild(i),this.buttonTitle.viewport=t,this.anchor.viewport.appendChild(this.buttonTitle.viewport)},t.prototype.appendAndBuildButton=function(){var t=document.createElement("span");t.className="WineCheckoutButton",this.button.viewport=t,this.anchor.viewport.appendChild(this.button.viewport)},t.prototype.appendAndBuildIcon=function(){var t=document.createElement("span");t.className="WineCheckoutIcon";var i=document.createElement("span");i.className="WineCheckoutIcon-icon icon-basket",t.appendChild(i),this.icon.viewport=t,this.anchor.viewport.appendChild(this.icon.viewport)},t.prototype.normalizeAnchor=function(){var t=this.viewport.querySelector(".WineCheckout-select-area");return t?(this.anchor=new WineAnchor(t),!0):!1},t.prototype.normalize=function(){this.normalizeAnchor()&&(this.buttonTitle.viewport=this.anchor.viewport.querySelector(".WineCheckoutTitle"),this.button.viewport=this.anchor.viewport.querySelector(".WineCheckoutButton"),this.icon.viewport=this.anchor.viewport.querySelector(".WineCheckoutIcon"),this.buttonTitle.viewport||this.appendAndBuildButtonTitle(),this.button.viewport||this.appendAndBuildButton(),this.icon.viewport||this.appendAndBuildIcon())},t}(),WineDescription=function(){function t(t,i){this.viewport=t,this.config={buttonClass:"WineDescriptionShowMore-button",iconClass:"WineDescriptionShowMore-icon icon-down-dir",showMoreClass:"WineDescriptionShowMore",text:"Continuar lendo",textClass:"WineDescriptionShowMore-text Wine-anchor-text",wrapperClass:"WineDescription-wrapper"},this.wrapper={},this.showMoreButton={},this.hasFocus=!1,this.limited=!1,i&&this.init()}return t.prototype.getAnchor=function(){return this.showMoreButton.anchor},t.prototype.addLimit=function(){this.limited||(this.limited=!0,this.viewport.classList.add("is-limited"))},t.prototype.removeLimit=function(){this.limited&&(this.limited=!1,this.viewport.classList.remove("is-limited"))},t.prototype.toggleLimit=function(){this.limited?this.removeLimit():this.addLimit()},t.prototype.getTextSize=function(){for(var t=this.viewport.querySelectorAll("p"),i=0,e=t.length;e--;)i+=t[e].innerHTML.length;return i},t.prototype.buildShowMoreButton=function(){var t={};return t.anchor={},t.buttonText={},t.buttonIcon={},t.viewport=document.createElement("div"),t.viewport.className=this.config.showMoreClass,t.anchor=new WineAnchor(document.createElement("a")),t.anchor.viewport.className=this.config.buttonClass,t.buttonText.viewport=document.createElement("span"),t.buttonText.viewport.className=this.config.textClass,t.buttonText.viewport.innerHTML=this.config.text,t.buttonIcon.viewport=document.createElement("span"),t.buttonIcon.viewport.className=this.config.iconClass,t.anchor.viewport.appendChild(t.buttonText.viewport),t.anchor.viewport.appendChild(t.buttonIcon.viewport),t.viewport.appendChild(t.anchor.viewport),t},t.prototype.addShowMoreButton=function(){this.showMoreButton=this.buildShowMoreButton();var t=this.wrapper.viewport?this.wrapper:this;t.viewport.appendChild(this.showMoreButton.viewport)},t.prototype.hasTextLimit=function(){return this.viewport.classList.contains("is-limited")},t.prototype.init=function(){this.hasTextLimit()&&(this.limited=!0),this.wrapper.viewport=this.viewport.querySelector("."+this.config.wrapperClass),this.addShowMoreButton()},t}(),WineList=function(){function t(t,i,e){this.viewport=t,this.options={}||i,this.options.wineClass=".Wine",this.wines=[],e&&this.init()}return t.prototype.init=function(){for(var t=this.viewport.querySelectorAll(this.options.wineClass),i=t.length;i--;)this.wines.push(new Wine(t[i],!1,!0))},t}(),WineShowMore=function(){function t(){this.build(),this.hasFocus=!1}return t.prototype.getAnchor=function(){return this.anchor},t.prototype.buildSpan=function(t){var i=document.createElement("span");return i.className=t?t:"",i},t.prototype.buildTitle=function(){var t=document.createElement("span");return t.className="WineShowMoreTitle",t.openText=document.createElement("span"),t.openText.className="Wine-anchor-text WineShowMoreTitle-text WineShowMoreTitle-text--opened",t.openText.innerHTML="Fechar",t.closeText=document.createElement("span"),t.closeText.className="Wine-anchor-text WineShowMoreTitle-text WineShowMoreTitle-text--closed",t.closeText.innerHTML="Mais Informações",t.appendChild(t.openText),t.appendChild(t.closeText),t},t.prototype.buildButton=function(){var t=document.createElement("span");return t.className="WineShowMoreButton",t},t.prototype.buildIcon=function(){var t=document.createElement("span");return t.className="WineShowMoreIcon",t.openIcon=document.createElement("span"),t.openIcon.className="WineShowMoreIcon-icon WineShowMoreIcon-icon--open",t.openIcon.appendChild(this.buildSpan("icon-angle-left")),t.closeIcon=document.createElement("span"),t.closeIcon.className="WineShowMoreIcon-icon WineShowMoreIcon-icon--close",t.closeIcon.appendChild(this.buildSpan("icon-angle-right")),t.appendChild(t.openIcon),t.appendChild(t.closeIcon),t},t.prototype.buildAnchor=function(){var t=document.createElement("a");return t.className="WineShowMore-select-area",t.href="#",t},t.prototype.build=function(){this.viewport=document.createElement("section"),this.viewport.className="WineShowMore",this.anchor={},this.buttonTitle={},this.button={},this.icon={},this.anchor=new WineAnchor(this.buildAnchor()),this.buttonTitle.viewport=this.buildTitle(),this.button.viewport=this.buildButton(),this.icon.viewport=this.buildIcon(),this.anchor.viewport.appendChild(this.buttonTitle.viewport),this.anchor.viewport.appendChild(this.button.viewport),this.anchor.viewport.appendChild(this.icon.viewport),this.viewport.appendChild(this.anchor.viewport)},t}();