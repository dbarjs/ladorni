<!DOCTYPE html>
<html lang="pt-br">
<meta charset="UTF-8">
<title>La Dorni - Require Tests</title>
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
<script src="dist/js/villa.min.js"></script>
<link rel="stylesheet" href="dist/css/villa.min.css"/>
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="dist/css/material-colors.css"/>
<link rel="stylesheet" type="text/css" href="dist/css/villa-cross.min.css"/>
<script src="dist/js/html5shiv.js"></script>
<script src="dist/js/html5shiv-printshiv.js"></script>
<script src="dist/js/classList.min.js"></script>
<![endif]-->

<style>

	main {
		display: none;
	}

	main.is-loaded {
		display: block;
	}

</style>

<body>

	<main id="main">

		<img src="http://lorempixel.com/400/200/sports/" alt=""/>
		<img src="http://lorempixel.com/400/200/abstract/" alt=""/>
		<img src="http://lorempixel.com/400/200/people/" alt=""/>
		<img src="http://lorempixel.com/400/200/cats/" alt=""/>

	</main>

</body>

<script src="dist/js/ladorni.js"></script>
<script>


	var main = document.getElementById('main');
	main.content = main.querySelectorAll('img');

	var test;
	test = function (ev) {

		main.classList.add('is-loaded');
		console.log('loaded!');

	};

	// [pt-br] A classe Unloader evita que o conteúdo dos elementos
	// [pt-br] seja baixado. Só será permitido o download do conteúdo
	// [pt-br] quando o método 'load' da instancia ser chamado
	main.contentLoad = new Unloader(main.content);

	// [pt-br] A classe Require cria um evento para quando um
	// [pt-br] parte (range) dos elementos tem o seu conteúdo (src)
	// [pt-br] baixado (load event)
	main.require = new Require(main.content, test, .5);

	setTimeout(function () {

		main.contentLoad.load();

	}, 2000);

	setTimeout(function () {

		console.log('start again');
		main.contentLoad.load();

	}, 12000);

</script>

</html>